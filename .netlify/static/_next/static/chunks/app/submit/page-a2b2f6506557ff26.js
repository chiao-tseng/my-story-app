(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[731],{5904:(e,l,s)=>{"use strict";s.r(l),s.d(l,{default:()=>t});var a=s(5155),i=s(2115),n=s(6728);function t(){let[e,l]=(0,i.useState)({persona:"",content:"",authorName:"",authorContact:""}),[s,t]=(0,i.useState)(!1),r=e=>{let{name:s,value:a}=e.target;l(e=>({...e,[s]:a}))},c=async l=>{l.preventDefault(),t(!0);try{(await fetch("/api/stories",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok?(alert("已送出！等待審核。通過後會公開在「故事」頁面。"),window.location.href="/stories"):alert("提交失敗，請檢查欄位內容")}catch(e){console.error("提交失敗:",e),alert("提交失敗，請檢查欄位內容")}finally{t(!1)}};return(0,a.jsxs)("main",{className:"mx-auto max-w-4xl px-8 py-16",children:[(0,a.jsxs)("div",{className:"text-center mb-16",children:[(0,a.jsx)("div",{className:"magazine-caption mb-4",children:"SHARE YOUR STORY"}),(0,a.jsx)("h1",{className:"magazine-title mb-6",children:"分享你的故事"}),(0,a.jsx)("p",{className:"magazine-body text-gray-600 max-w-2xl mx-auto",children:"讓我們一起創造美好的故事集"})]}),(0,a.jsxs)("div",{className:"grid lg:grid-cols-2 gap-16",children:[(0,a.jsx)("div",{className:"space-y-8",children:(0,a.jsxs)("form",{onSubmit:c,className:"space-y-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"persona",className:"magazine-heading mb-4 block",children:"形象描述 *"}),(0,a.jsx)("input",{type:"text",id:"persona",name:"persona",value:e.persona,onChange:r,required:!0,className:"w-full px-4 py-3 border-2 border-black focus:outline-none focus:border-red-600 transition-colors magazine-body",placeholder:"請描述對象的外貌..."}),(0,a.jsx)("p",{className:"magazine-caption mt-2",children:"例如：黑髮、藍眼、戴眼鏡的男生"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"content",className:"magazine-heading mb-4 block",children:"故事內容 *"}),(0,a.jsx)("textarea",{id:"content",name:"content",value:e.content,onChange:r,required:!0,rows:8,className:"w-full px-4 py-3 border-2 border-black focus:outline-none focus:border-red-600 transition-colors magazine-body resize-none",placeholder:"請分享你的故事..."})]}),(0,a.jsxs)("div",{className:"magazine-card p-6",children:[(0,a.jsx)("h3",{className:"magazine-heading mb-6",children:"私人資訊（不公開）"}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"authorName",className:"magazine-body font-semibold mb-2 block",children:"作者姓名 *"}),(0,a.jsx)("input",{type:"text",id:"authorName",name:"authorName",value:e.authorName,onChange:r,required:!0,className:"w-full px-4 py-3 border-2 border-gray-300 focus:outline-none focus:border-red-600 transition-colors magazine-body",placeholder:"你的姓名..."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"authorContact",className:"magazine-body font-semibold mb-2 block",children:"聯絡方式 *"}),(0,a.jsx)("input",{type:"text",id:"authorContact",name:"authorContact",value:e.authorContact,onChange:r,required:!0,className:"w-full px-4 py-3 border-2 border-gray-300 focus:outline-none focus:border-red-600 transition-colors magazine-body",placeholder:"Email 或電話..."})]})]})]}),(0,a.jsx)("button",{type:"submit",disabled:s,className:"magazine-button-accent w-full py-4 text-lg disabled:opacity-50 disabled:cursor-not-allowed",children:s?"提交中...":"提交故事"})]})}),(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"magazine-heading mb-6",children:"角色預覽"}),e.persona?(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(n.default,{description:e.persona,size:120}),(0,a.jsx)("p",{className:"magazine-body mt-4 text-gray-600",children:e.persona})]}):(0,a.jsx)("div",{className:"magazine-card p-8 text-center",children:(0,a.jsx)("p",{className:"magazine-body text-gray-500",children:"輸入形象描述後，這裡會顯示角色預覽"})})]}),(0,a.jsxs)("div",{className:"magazine-card p-6",children:[(0,a.jsx)("h4",{className:"magazine-heading mb-4",children:"投稿須知"}),(0,a.jsxs)("ul",{className:"space-y-3",children:[(0,a.jsxs)("li",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-red-600 rounded-full mt-2 flex-shrink-0"}),(0,a.jsx)("p",{className:"magazine-body text-sm",children:"所有欄位皆為必填，請確保資訊完整"})]}),(0,a.jsxs)("li",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-red-600 rounded-full mt-2 flex-shrink-0"}),(0,a.jsx)("p",{className:"magazine-body text-sm",children:"投稿後將進入審核流程，通過後才會公開"})]}),(0,a.jsxs)("li",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-red-600 rounded-full mt-2 flex-shrink-0"}),(0,a.jsx)("p",{className:"magazine-body text-sm",children:"私人資訊僅供平台聯繫使用，不會公開"})]})]})]})]})]})]})}},6259:(e,l,s)=>{Promise.resolve().then(s.bind(s,5904))},6728:(e,l,s)=>{"use strict";s.d(l,{default:()=>t});var a=s(5155),i=s(2115);let n={skin:{light:"#FDBCB4",medium:"#E8A87C",dark:"#8B4513",pale:"#F5DEB3"},hair:{black:"#2C1810",brown:"#8B4513",blonde:"#DAA520",red:"#A0522D",white:"#F5F5DC",blue:"#4169E1",pink:"#FF69B4"},eyes:{brown:"#8B4513",blue:"#4169E1",green:"#228B22",black:"#2C1810",hazel:"#DAA520"},clothes:{casual:"#FF6B6B",formal:"#2C3E50",sporty:"#3498DB",casual2:"#9B59B6",formal2:"#34495E"}};function t(e){let{description:l,size:s=64}=e,[t,r]=(0,i.useState)("");return((0,i.useEffect)(()=>{l.trim()&&r(function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,s=document.createElement("canvas");s.width=l,s.height=l;let a=s.getContext("2d"),i=l/8;return a.clearRect(0,0,l,l),a.fillStyle=n.skin[e.skin],a.fillRect(2*i,2*i,4*i,4*i),a.fillStyle=n.hair[e.hair],a.fillRect(+i,+i,6*i,2*i),a.fillStyle=n.eyes[e.eyes],a.fillRect(2.5*i,3*i,.5*i,.5*i),a.fillRect(5*i,3*i,.5*i,.5*i),a.fillStyle="#8B4513","smile"===e.mouth?a.fillRect(3*i,4.5*i,2*i,.5*i):"frown"===e.mouth?a.fillRect(3*i,5*i,2*i,.5*i):"open"===e.mouth?a.fillRect(3.5*i,4.5*i,+i,+i):a.fillRect(3*i,4.5*i,2*i,.3*i),a.fillStyle=n.clothes[e.clothes],a.fillRect(2*i,6*i,4*i,2*i),"glasses"===e.accessories?(a.strokeStyle="#2C3E50",a.lineWidth=1,a.strokeRect(2*i,2.8*i,1.5*i,.8*i),a.strokeRect(4.5*i,2.8*i,1.5*i,.8*i),a.beginPath(),a.moveTo(3.5*i,3.2*i),a.lineTo(4.5*i,3.2*i),a.stroke()):"hat"===e.accessories&&(a.fillStyle="#8B4513",a.fillRect(.5*i,.5*i,7*i,1.5*i)),s.toDataURL()}(function(e){let l=e.toLowerCase(),s="light";l.includes("黑")||l.includes("深色")?s="dark":l.includes("白")||l.includes("淺")?s="pale":(l.includes("黃")||l.includes("小麥"))&&(s="medium");let a="black";l.includes("金")||l.includes("黃")?a="blonde":l.includes("棕")||l.includes("咖啡")?a="brown":l.includes("紅")?a="red":l.includes("白")||l.includes("銀")?a="white":l.includes("藍")?a="blue":l.includes("粉")&&(a="pink");let i="brown";l.includes("藍眼")?i="blue":l.includes("綠眼")?i="green":l.includes("黑眼")?i="black":l.includes("棕眼")&&(i="hazel");let n="neutral";l.includes("笑")||l.includes("開心")?n="smile":l.includes("皺眉")||l.includes("不開心")?n="frown":(l.includes("張嘴")||l.includes("驚訝"))&&(n="open");let t="casual";l.includes("西裝")||l.includes("正式")?t="formal":l.includes("運動")||l.includes("球衣")?t="sporty":l.includes("休閒")&&(t="casual2");let r="none";return l.includes("眼鏡")?r="glasses":l.includes("帽子")?r="hat":l.includes("耳環")&&(r="earrings"),{skin:s,hair:a,eyes:i,mouth:n,clothes:t,accessories:r}}(l),s))},[l,s]),t)?(0,a.jsx)("div",{className:"inline-block",children:(0,a.jsx)("img",{src:t,alt:"像素頭像",className:"rounded-lg border-2 border-gray-300",style:{width:s,height:s,imageRendering:"pixelated"}})}):(0,a.jsx)("div",{className:"bg-gray-200 rounded-lg flex items-center justify-center text-gray-500 text-xs",style:{width:s,height:s},children:"生成中..."})}}},e=>{e.O(0,[441,255,358],()=>e(e.s=6259)),_N_E=e.O()}]);