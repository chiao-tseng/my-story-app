(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8],{1672:(e,l,s)=>{"use strict";s.d(l,{A:()=>i});var t=s(5155);function i(e){var l;let{status:s}=e,i={published:{text:"已發布",cls:"bg-green-100 text-green-700 border-green-200"},pending:{text:"待審核",cls:"bg-amber-100 text-amber-700 border-amber-200"},rejected:{text:"已退稿",cls:"bg-red-100 text-red-700 border-red-200"},withdrawn:{text:"已撤稿",cls:"bg-slate-100 text-slate-700 border-slate-200"}},n=null!=(l=i[s])?l:i.published;return(0,t.jsx)("span",{className:"inline-flex items-center rounded-full border px-2 py-0.5 text-xs font-medium ".concat(n.cls),children:n.text})}},6728:(e,l,s)=>{"use strict";s.d(l,{default:()=>a});var t=s(5155),i=s(2115);let n={skin:{light:"#FDBCB4",medium:"#E8A87C",dark:"#8B4513",pale:"#F5DEB3"},hair:{black:"#2C1810",brown:"#8B4513",blonde:"#DAA520",red:"#A0522D",white:"#F5F5DC",blue:"#4169E1",pink:"#FF69B4"},eyes:{brown:"#8B4513",blue:"#4169E1",green:"#228B22",black:"#2C1810",hazel:"#DAA520"},clothes:{casual:"#FF6B6B",formal:"#2C3E50",sporty:"#3498DB",casual2:"#9B59B6",formal2:"#34495E"}};function a(e){let{description:l,size:s=64}=e,[a,c]=(0,i.useState)("");return((0,i.useEffect)(()=>{l.trim()&&c(function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,s=document.createElement("canvas");s.width=l,s.height=l;let t=s.getContext("2d"),i=l/8;return t.clearRect(0,0,l,l),t.fillStyle=n.skin[e.skin],t.fillRect(2*i,2*i,4*i,4*i),t.fillStyle=n.hair[e.hair],t.fillRect(+i,+i,6*i,2*i),t.fillStyle=n.eyes[e.eyes],t.fillRect(2.5*i,3*i,.5*i,.5*i),t.fillRect(5*i,3*i,.5*i,.5*i),t.fillStyle="#8B4513","smile"===e.mouth?t.fillRect(3*i,4.5*i,2*i,.5*i):"frown"===e.mouth?t.fillRect(3*i,5*i,2*i,.5*i):"open"===e.mouth?t.fillRect(3.5*i,4.5*i,+i,+i):t.fillRect(3*i,4.5*i,2*i,.3*i),t.fillStyle=n.clothes[e.clothes],t.fillRect(2*i,6*i,4*i,2*i),"glasses"===e.accessories?(t.strokeStyle="#2C3E50",t.lineWidth=1,t.strokeRect(2*i,2.8*i,1.5*i,.8*i),t.strokeRect(4.5*i,2.8*i,1.5*i,.8*i),t.beginPath(),t.moveTo(3.5*i,3.2*i),t.lineTo(4.5*i,3.2*i),t.stroke()):"hat"===e.accessories&&(t.fillStyle="#8B4513",t.fillRect(.5*i,.5*i,7*i,1.5*i)),s.toDataURL()}(function(e){let l=e.toLowerCase(),s="light";l.includes("黑")||l.includes("深色")?s="dark":l.includes("白")||l.includes("淺")?s="pale":(l.includes("黃")||l.includes("小麥"))&&(s="medium");let t="black";l.includes("金")||l.includes("黃")?t="blonde":l.includes("棕")||l.includes("咖啡")?t="brown":l.includes("紅")?t="red":l.includes("白")||l.includes("銀")?t="white":l.includes("藍")?t="blue":l.includes("粉")&&(t="pink");let i="brown";l.includes("藍眼")?i="blue":l.includes("綠眼")?i="green":l.includes("黑眼")?i="black":l.includes("棕眼")&&(i="hazel");let n="neutral";l.includes("笑")||l.includes("開心")?n="smile":l.includes("皺眉")||l.includes("不開心")?n="frown":(l.includes("張嘴")||l.includes("驚訝"))&&(n="open");let a="casual";l.includes("西裝")||l.includes("正式")?a="formal":l.includes("運動")||l.includes("球衣")?a="sporty":l.includes("休閒")&&(a="casual2");let c="none";return l.includes("眼鏡")?c="glasses":l.includes("帽子")?c="hat":l.includes("耳環")&&(c="earrings"),{skin:s,hair:t,eyes:i,mouth:n,clothes:a,accessories:c}}(l),s))},[l,s]),a)?(0,t.jsx)("div",{className:"inline-block",children:(0,t.jsx)("img",{src:a,alt:"像素頭像",className:"rounded-lg border-2 border-gray-300",style:{width:s,height:s,imageRendering:"pixelated"}})}):(0,t.jsx)("div",{className:"bg-gray-200 rounded-lg flex items-center justify-center text-gray-500 text-xs",style:{width:s,height:s},children:"生成中..."})}},8101:(e,l,s)=>{"use strict";s.r(l),s.d(l,{default:()=>d});var t=s(5155),i=s(2115),n=s(2619),a=s.n(n),c=s(1672),r=s(6728);function d(){let[e,l]=(0,i.useState)([]),[s,n]=(0,i.useState)(!0);return(0,i.useEffect)(()=>{fetch("/api/stories",{cache:"no-store"}).then(e=>e.json()).then(e=>l(e.stories||[])).finally(()=>n(!1))},[]),(0,t.jsxs)("main",{className:"mx-auto max-w-6xl px-8 py-16",children:[(0,t.jsxs)("div",{className:"text-center mb-16",children:[(0,t.jsx)("div",{className:"magazine-caption mb-4",children:"STORY COLLECTION"}),(0,t.jsx)("h1",{className:"magazine-title mb-6",children:"故事列表"}),(0,t.jsx)("p",{className:"magazine-body text-gray-600 max-w-2xl mx-auto",children:"僅顯示已公開的匿名故事。請尊重投稿者與當事人。"})]}),s&&(0,t.jsx)("div",{className:"text-center py-20",children:(0,t.jsx)("div",{className:"magazine-caption",children:"載入中…"})}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:[e.map(e=>(0,t.jsxs)("article",{className:"magazine-card p-6 group",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("div",{className:"magazine-caption",children:new Date(e.createdAt).toLocaleDateString("zh-TW")}),(0,t.jsx)(c.A,{status:e.status})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,t.jsx)(r.default,{description:e.persona,size:64}),(0,t.jsx)("div",{children:(0,t.jsx)("h2",{className:"magazine-heading",children:e.persona||"未命名角色"})})]}),(0,t.jsx)("div",{className:"mb-6",children:(0,t.jsx)("p",{className:"magazine-body text-gray-700 leading-relaxed",children:e.content.length>150?e.content.slice(0,150)+"…":e.content})}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(a(),{href:"/stories/".concat(e.id),className:"magazine-button block text-center py-3 text-sm",children:"閱讀全文"}),(0,t.jsx)(a(),{href:"/contact?storyId=".concat(encodeURIComponent(e.id)),className:"magazine-caption text-center block hover:text-red-600 transition-colors",children:"聯繫出版社"})]})]},e.id)),!s&&0===e.length&&(0,t.jsxs)("div",{className:"col-span-full text-center py-20",children:[(0,t.jsx)("div",{className:"magazine-caption mb-4",children:"目前尚無公開故事"}),(0,t.jsx)("p",{className:"magazine-body text-gray-600 mb-8",children:"歡迎成為第一位投稿者！"}),(0,t.jsx)(a(),{href:"/submit",className:"magazine-button-accent inline-block px-8 py-3",children:"開始投稿"})]})]}),e.length>0&&(0,t.jsx)("div",{className:"mt-20 pt-8 border-t border-gray-200",children:(0,t.jsx)("div",{className:"text-center",children:(0,t.jsx)("p",{className:"magazine-caption",children:"更多故事持續更新中"})})})]})}},8230:(e,l,s)=>{Promise.resolve().then(s.bind(s,8101))}},e=>{e.O(0,[619,441,255,358],()=>e(e.s=8230)),_N_E=e.O()}]);